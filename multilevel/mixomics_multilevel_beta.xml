<tool id="mixomics_multilevel" name="Multilevel" version="0.2">

   <description>Data transformation multilevel (cross-over design) with mixOmics package</description>
    
    <requirements>
        
        <requirement type="package" version="1.1_4">r-batch</requirement>
    </requirements>
    
    <stdio>
        <exit_code range="1:" level="fatal" />
    </stdio>
	
  
  <command>
	  Rscript $__tool_directory__/mixomics_multilevel_beta.r
	  
	  dataMatrix_in "$dataMatrix_in"
	  sampleMetadata_in "$sampleMetadata_in"
	  
	  
	  #if $nblevel.option_level == "onelevel"
	   respL "$nblevel.respL"
	  
	  #end if
	  #if $nblevel.option_level == "twolevel"
	   respL1 "$nblevel.respL1"
	   respL2 "$nblevel.respL2"
	  #end if
  </command>
  <inputs>
    <param name="dataMatrix_in" label="Data matrix file" type="data" format="tabular" help="variable x sample, decimal: '.', missing: NA, mode: numerical, sep: tabular" />
    <param name="sampleMetadata_in" label="Sample metadata file" type="data" format="tabular" help="sample x metadata, decimal: '.', missing: NA, mode: character and numerical, sep: tabular" />
    
    <conditional name="nblevel">
      <param name="option_level" type="select" label="Select number of levels">
        <option value="onelevel" select="True">One Level</option>
        <option value="twolevel">Two levels</option>
      </param>
      <when value="onelevel">
         <param name="respL" label="Level name (as in sampleMetadata)" type="text" value = "none" help="Indicate the column of the sample table to be used as factor" />
      </when>
      <when value="twolevel">
		  <param name="respL1" label="First level name (as in sampleMetadata)" type="text" value = "none" help="Indicate the column of the sample table to be used as first factor" />
          <param name="respL2" label="Second level name (as in sampleMetadata)" type="text" value = "none" help="Indicate the column of the sample table to be used as second factor" />
	  </when>
    </conditional>
  </inputs>

  <outputs>
    <data name="dataMatrix_out" label="${tool.name}_${dataMatrix_in.name}" format="tabular" ></data>
    <data name="multilevelRData" format="rdata" from_work_dir="multilevel.RData" label="multilevel.RData" />
    <data name="log" format="txt" from_work_dir="multilevel.log" label="multilevel.log.txt" />
  </outputs>
 
  

  <help>

mixOmics R package

===========
Description
===========


  </help>
</tool>
